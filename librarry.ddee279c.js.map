{"mappings":"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","sources":["src/librarry.js","src/main-js/render-librarry-movies.js","src/templates/movies-watched.hbs","src/templates/modal-no-films-librarry.hbs"],"sourcesContent":["import './main-js/btn-scroll-up';\nimport './main-js/title-animation';\nimport './main-js/tioggle-theme';\nimport './main-js/location';\nimport './main-js/google-translate';\nimport './main-js/firebase';\nimport 'lazysizes';\nimport 'lazysizes/plugins/parent-fit/ls.parent-fit';\nimport './main-js/preloader';\nimport './main-js/render-librarry-movies';\nimport './main-js/fatch-films';\nimport './main-js/hidden-header';\n","import moviesWathces from '../templates/movies-watched.hbs';\nimport noFilmsInLibrarry from '../templates/modal-no-films-librarry.hbs';\nimport { ApiThemoviedb } from './fatch-films';\nimport modalFunction from '../templates/modal.hbs';\nimport * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\nimport { Notify } from 'notiflix';\nexport const gallery = document.querySelector('.gallery');\nexport const WATCH_KEY = 'watch-key';\nconst apiThemoviedb = new ApiThemoviedb();\n\ngallery.addEventListener('click', onClickGalleryLibraryRemoveAndOpenModal);\n\n// получение списка фильмов из локального хранилища для библиотеки и проверка на пустую библиотеку\nfunction getWatchesList() {\n  const data = JSON.parse(localStorage.getItem(WATCH_KEY));\n  if (!data) {\n    gallery.innerHTML = noFilmsInLibrarry();\n    return;\n  }\n  return data;\n}\n\n// рендер карточек в библиотеку из локального хранилища\nfunction renderMarkupListMovies() {\n  let data = getWatchesList();\n  const markup = data\n    .map(el => {\n      return moviesWathces(el);\n    })\n    .join('');\n\n  gallery.innerHTML = markup;\n\n  if (!markup) {\n    gallery.innerHTML = noFilmsInLibrarry();\n  }\n}\nrenderMarkupListMovies();\n\nasync function onClickGalleryLibraryRemoveAndOpenModal(e) {\n  if (e.target === e.currentTarget) {\n    return;\n  }\n\n  const currentId = e.target.closest('.movie-card__item').dataset.id;\n  apiThemoviedb.setMovieId(currentId);\n\n  if (e.target.id === 'close') {\n    let data = getWatchesList();\n    console.log(data);\n    data = data.filter(film => film.id !== Number(currentId));\n    localStorage.setItem(WATCH_KEY, JSON.stringify(data));\n    Notify.warning('Фильм Удалён из библиотеки');\n    renderMarkupListMovies();\n  } else {\n    await apiThemoviedb\n      .fetchFilmsById(this.currentId)\n      .then(onOpenCardModalLibrarry);\n  }\n}\n// рендер модального окна\nfunction onOpenCardModalLibrarry(respModal) {\n  let data = getWatchesList();\n  const markupId = modalFunction(respModal);\n  const instance = basicLightbox.create(markupId);\n  instance.show();\n  document.body.classList.add('stop-fon');\n\n  const modalLibrarryBtn = document.querySelector('.modal-btn');\n  modalLibrarryBtn.textContent = 'remove from watch';\n  modalLibrarryBtn.addEventListener('click', e => {\n    const currentId = e.target.dataset.id;\n    if (data.find(film => film.id === Number(currentId))) {\n      let data = getWatchesList();\n      data = data.filter(film => film.id !== Number(currentId));\n      localStorage.setItem(WATCH_KEY, JSON.stringify(data));\n      instance.close();\n      Notify.success('Фильм Удалён из библиотеки');\n      renderMarkupListMovies();\n    }\n  });\n\n  // закрытие модального окна по кнопке esc\n  window.addEventListener('keydown', onEscKeyPressEight);\n  function onEscKeyPressEight(event) {\n    if (event.code === 'Escape') {\n      instance.close();\n      document.body.classList.remove('stop-fon');\n    }\n  }\n  //  закрытие модального окна по клику бекдропа\n  const basic = document.querySelector('.basicLightbox');\n  basic.addEventListener('click', onOffHidden);\n\n  function onOffHidden() {\n    document.body.classList.remove('stop-fon');\n  }\n}\n","<li class='movie-card__item' data-id='{{id}}' id='open'>\n  <div class='movie-card'>\n    <div class='poster-wrapper'>\n      {{#if poster_path}}\n        <img\n          src='https://image.tmdb.org/t/p/w500/{{poster_path}}'\n          alt='{{title}}'\n          class='movie-card__poster lazyload'\n          loading='lazy'\n        />\n      {{else}}\n        <img\n          src='https://yt3.ggpht.com/AAKF_677TIvjFz_9xFF0R6PgiVd0kRpEtY6APSxSDRP65nXg8hkn9NFsz2bRd9_Z37DJ9D_b=s900-c-k-c0x00ffffff-no-rj'\n          alt='{{title}}'\n          class='movie-card__poster'\n          loading='lazy'\n        />\n      {{/if}}\n    </div>\n    <div class='card-info'>\n      <h2 class='movie-info-title'> {{title}}</h2>\n      <div class='info-wrapper'>\n        <div class='movie-icon-decor'>\n          <span>&#127871;</span>\n        </div>\n        <p class='info-item-year'>{{release_date}}</p>\n        <p class='info-item-rating'><span class='rating-icon'>&#9733;</span>\n          {{vote_average}}</p>\n      </div>\n    </div>\n  </div>\n  <div class='watched-delete-wrapper'>\n    <button class='watched-delete' type='button' id='close'></button>\n  </div>\n</li>","<div class='librarry-container'>\n  <p class='librarry-no-movies'>theare are no movies in your librarry </p>\n</div>"],"names":["parcelRequire","$bpxeT","$l5bVx","$01cd542d722da8d3$export$2e2bcd8739ae039","$parcel$interopDefault","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","name","hash","loc","start","line","column","end","compiler","main","stack1","fn","program","inverse","useData","$e6a86b6c1ae50643$export$2e2bcd8739ae039","$f32f9daa679e7852$export$b21c1b4271bdbe93","document","querySelector","$f32f9daa679e7852$export$cb5703ef28158ea8","$f32f9daa679e7852$var$apiThemoviedb","$26m7D","ApiThemoviedb","$f32f9daa679e7852$var$getWatchesList","JSON","parse","localStorage","getItem","innerHTML","$f32f9daa679e7852$var$renderMarkupListMovies","markup","map","el","join","$f32f9daa679e7852$var$_onClickGalleryLibraryRemoveAndOpenModal","$2TvXO","mark","_callee","e","currentId","target","currentTarget","closest","dataset","id","setMovieId","console","log","filter","film","Number","setItem","stringify","$iU1Pc","Notify","warning","fetchFilmsById","this","then","$f32f9daa679e7852$var$onOpenCardModalLibrarry","apply","arguments","respModal","markupId","$5HWQb","default","instance","$dyT35","create","show","body","classList","add","modalLibrarryBtn","textContent","addEventListener","find","data1","close","success","window","event","code","remove"],"version":3,"file":"librarry.ddee279c.js.map"}