function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},l={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in l){var t=l[e];delete l[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){l[e]=t},t.parcelRequired7c6=o),o("6eQFO"),o("dGt55"),o("fnAKw"),o("e8Soa"),o("ewcbU"),o("bHwLt"),o("c1QDM"),o("3yZwQ"),o("50EtO");var a=e(o("amrNH")).template({1:function(e,t,n,l,o){var a,i=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,c="function",s=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <img\n          src='https://image.tmdb.org/t/p/w500/"+s(typeof(a=null!=(a=d(n,"poster_path")||(null!=t?d(t,"poster_path"):t))?a:r)===c?a.call(i,{name:"poster_path",hash:{},data:o,loc:{start:{line:6,column:47},end:{line:6,column:62}}}):a)+"'\n          alt='"+s(typeof(a=null!=(a=d(n,"title")||(null!=t?d(t,"title"):t))?a:r)===c?a.call(i,{name:"title",hash:{},data:o,loc:{start:{line:7,column:15},end:{line:7,column:24}}}):a)+"'\n          class='movie-card__poster lazyload'\n          loading='lazy'\n        />\n"},3:function(e,t,n,l,o){var a,i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <img\n          src='https://yt3.ggpht.com/AAKF_677TIvjFz_9xFF0R6PgiVd0kRpEtY6APSxSDRP65nXg8hkn9NFsz2bRd9_Z37DJ9D_b=s900-c-k-c0x00ffffff-no-rj'\n          alt='"+e.escapeExpression("function"==typeof(a=null!=(a=i(n,"title")||(null!=t?i(t,"title"):t))?a:e.hooks.helperMissing)?a.call(null!=t?t:e.nullContext||{},{name:"title",hash:{},data:o,loc:{start:{line:14,column:15},end:{line:14,column:24}}}):a)+"'\n          class='movie-card__poster'\n          loading='lazy'\n        />\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,l,o){var a,i,r=null!=t?t:e.nullContext||{},c=e.hooks.helperMissing,s="function",d=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"<li class='movie-card__item' data-id='"+d(typeof(i=null!=(i=u(n,"id")||(null!=t?u(t,"id"):t))?i:c)===s?i.call(r,{name:"id",hash:{},data:o,loc:{start:{line:1,column:38},end:{line:1,column:44}}}):i)+"' id='open'>\n  <div class='movie-card'>\n    <div class='poster-wrapper'>\n"+(null!=(a=u(n,"if").call(r,null!=t?u(t,"poster_path"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:4,column:6},end:{line:18,column:13}}}))?a:"")+"    </div>\n    <div class='card-info'>\n      <h2 class='movie-info-title'> "+d(typeof(i=null!=(i=u(n,"title")||(null!=t?u(t,"title"):t))?i:c)===s?i.call(r,{name:"title",hash:{},data:o,loc:{start:{line:21,column:36},end:{line:21,column:45}}}):i)+"</h2>\n      <div class='info-wrapper'>\n        <div class='movie-icon-decor'>\n          <span>&#127871;</span>\n        </div>\n        <p class='info-item-year'>"+d(typeof(i=null!=(i=u(n,"release_date")||(null!=t?u(t,"release_date"):t))?i:c)===s?i.call(r,{name:"release_date",hash:{},data:o,loc:{start:{line:26,column:34},end:{line:26,column:50}}}):i)+"</p>\n        <p class='info-item-rating'><span class='rating-icon'>&#9733;</span>\n          "+d(typeof(i=null!=(i=u(n,"vote_average")||(null!=t?u(t,"vote_average"):t))?i:c)===s?i.call(r,{name:"vote_average",hash:{},data:o,loc:{start:{line:28,column:10},end:{line:28,column:26}}}):i)+"</p>\n      </div>\n    </div>\n  </div>\n  <div class='watched-delete-wrapper'>\n    <button class='watched-delete' type='button' id='close'></button>\n  </div>\n</li>"},useData:!0});var i=e(o("amrNH")).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,l,o){return"<div class='librarry-container'>\n  <p class='librarry-no-movies'>theare are no movies in your librarry </p>\n</div>"},useData:!0}),r=o("1I64Y"),c=o("l2kTn"),s=o("9B8F0"),d=o("eWCmQ");const u=document.querySelector(".gallery"),p=new(0,r.ApiThemoviedb);function f(){const e=JSON.parse(localStorage.getItem("watch-key"));if(e)return e;u.innerHTML=i()}function m(){const e=f().map((e=>a(e))).join("");u.innerHTML=e,e||(u.innerHTML=i())}function h(e){let t=f();const n=(0,c.default)(e),l=s.create(n);l.show(),document.body.classList.add("stop-fon");document.querySelector(".modal-img").addEventListener("click",y);const o=document.querySelector(".modal-btn");o.textContent="remove from watch",o.addEventListener("click",(e=>{const n=e.target.dataset.id;if(t.find((e=>e.id===Number(n)))){let e=f();e=e.filter((e=>e.id!==Number(n))),localStorage.setItem("watch-key",JSON.stringify(e)),l.close(),d.Notify.success("Фильм Удалён из библиотеки"),m()}})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&(l.close(),document.body.classList.remove("stop-fon"))}));document.querySelector(".basicLightbox").addEventListener("click",(function(){document.body.classList.remove("stop-fon")}))}function y(e){const t=e.target.dataset.id;p.setMovieId(t),p.fetchTrailerMovies(t).then(v)}function v(e){if(e.results.length){const t=`<iframe class="modal-film__video" src="https://www.youtube.com/embed/${e.results[0].key}/" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;s.create(t).show()}else d.Notify.failure("Извините ,видео не найдено")}u.addEventListener("click",(async function(e){if(e.target===e.currentTarget)return;const t=e.target.closest(".movie-card__item").dataset.id;if(p.setMovieId(t),"close"===e.target.id){let e=f();console.log(e),e=e.filter((e=>e.id!==Number(t))),localStorage.setItem("watch-key",JSON.stringify(e)),d.Notify.warning("Фильм Удалён из библиотеки"),m()}else await p.fetchFilmsById(this.currentId).then(h)})),m(),o("1I64Y"),o("bwVIM");
//# sourceMappingURL=librarry.7e766089.js.map
