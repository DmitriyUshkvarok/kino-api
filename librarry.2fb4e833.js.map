{"mappings":"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","sources":["src/librarry.js","src/templates/movies-watched.hbs","src/templates/modal-no-films-librarry.hbs","src/main-js/render-librarry-movies.js"],"sourcesContent":["import './main-js/btn-scroll-up';\nimport './main-js/title-animation';\nimport './main-js/tioggle-theme';\nimport './main-js/location';\nimport './main-js/google-translate';\nimport './main-js/firebase';\nimport 'lazysizes';\nimport 'lazysizes/plugins/parent-fit/ls.parent-fit';\nimport './main-js/preloader';\nimport './main-js/render-librarry-movies';\nimport './main-js/fatch-films';\n","<li class='movie-card__item' data-id='{{id}}' id='open'>\n  <div class='movie-card'>\n    <div class='poster-wrapper'>\n      {{#if poster_path}}\n        <img\n          src='https://image.tmdb.org/t/p/w500/{{poster_path}}'\n          alt='{{title}}'\n          class='movie-card__poster lazyload'\n          loading='lazy'\n          {{!-- data-id='{{id}}' --}}\n        />\n      {{else}}\n        <img\n          src='https://yt3.ggpht.com/AAKF_677TIvjFz_9xFF0R6PgiVd0kRpEtY6APSxSDRP65nXg8hkn9NFsz2bRd9_Z37DJ9D_b=s900-c-k-c0x00ffffff-no-rj'\n          alt='{{title}}'\n          class='movie-card__poster'\n          loading='lazy'\n          {{!-- data-id='{{id}}' --}}\n        />\n      {{/if}}\n    </div>\n    <div class='card-info'>\n      <h2 class='movie-info-title'> {{title}}</h2>\n      <div class='info-wrapper'>\n        <div class='movie-icon-decor'>\n          <span>&#127871;</span>\n        </div>\n        <p class='info-item-year'>{{release_date}}</p>\n        <p class='info-item-rating'><span class='rating-icon'>&#9733;</span>\n          {{vote_average}}</p>\n      </div>\n    </div>\n  </div>\n  <div class='watched-delete-wrapper'>\n    <button class='watched-delete' type='button' id='close'></button>\n  </div>\n</li>","<div class='librarry-container'>\n  <p class='librarry-no-movies'>theare are no movies in your librarry </p>\n</div>","import moviesWathces from '../templates/movies-watched.hbs';\nimport noFilmsInLibrarry from '../templates/modal-no-films-librarry.hbs';\nimport { ApiThemoviedb } from './fatch-films';\nimport modalFunction from '../templates/modal.hbs';\nimport * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\nimport { Notify } from 'notiflix';\nexport const gallery = document.querySelector('.gallery');\nexport const WATCH_KEY = 'watch-key';\nconst apiThemoviedb = new ApiThemoviedb();\n\ngallery.addEventListener('click', onClickGalleryLibraryRemoveAndOpenModal);\n\n// получение списка фильмов из локального хранилища для библиотеки\nfunction getWatchesList() {\n  const data = JSON.parse(localStorage.getItem(WATCH_KEY));\n  if (!data) {\n    gallery.innerHTML = noFilmsInLibrarry();\n    return;\n  }\n  return data;\n}\n\n// рендер карточек в библиотеку из локального хранилища\nfunction renderMarkupListMovies() {\n  let data = getWatchesList();\n  const markup = data\n    .map(el => {\n      return moviesWathces(el);\n    })\n    .join('');\n\n  gallery.innerHTML = markup;\n\n  if (!markup) {\n    gallery.innerHTML = noFilmsInLibrarry();\n  }\n}\nrenderMarkupListMovies();\n\nasync function onClickGalleryLibraryRemoveAndOpenModal(e) {\n  if (e.target === e.currentTarget) {\n    return;\n  }\n\n  const currentId = e.target.closest('.movie-card__item').dataset.id;\n  apiThemoviedb.setMovieId(currentId);\n\n  if (e.target.id === 'close') {\n    let data = getWatchesList();\n    console.log(data);\n    data = data.filter(film => film.id !== Number(currentId));\n    localStorage.setItem(WATCH_KEY, JSON.stringify(data));\n    Notify.success('Фильм Удалён из библиотеки');\n    renderMarkupListMovies();\n  } else {\n    await apiThemoviedb\n      .fetchFilmsById(this.currentId)\n      .then(onOpenCardModalLibrarry);\n  }\n}\n// рендер модального окна\nfunction onOpenCardModalLibrarry(respModal) {\n  // console.log(respModal);\n  const markupId = modalFunction(respModal);\n  const instance = basicLightbox.create(markupId);\n  instance.show();\n  document.body.classList.add('stop-fon');\n\n  // закрытие модального окна по кнопке esc\n  window.addEventListener('keydown', onEscKeyPressEight);\n  function onEscKeyPressEight(event) {\n    if (event.code === 'Escape') {\n      instance.close();\n      document.body.classList.remove('stop-fon');\n    }\n  }\n  //  закрытие модального окна по клику бекдропа\n  const basic = document.querySelector('.basicLightbox');\n  basic.addEventListener('click', onOffHidden);\n\n  function onOffHidden() {\n    document.body.classList.remove('stop-fon');\n  }\n}\n"],"names":["parcelRequire","$f1454755519d831b$export$2e2bcd8739ae039","$parcel$interopDefault","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","name","hash","loc","start","line","column","end","compiler","main","stack1","fn","program","inverse","useData","$1ea894bb1475f758$export$2e2bcd8739ae039","$7916d3cf678cc21c$export$b21c1b4271bdbe93","document","querySelector","$7916d3cf678cc21c$var$apiThemoviedb","$1I64Y","ApiThemoviedb","$7916d3cf678cc21c$var$getWatchesList","JSON","parse","localStorage","getItem","innerHTML","$7916d3cf678cc21c$var$renderMarkupListMovies","markup","map","el","join","$7916d3cf678cc21c$var$onOpenCardModalLibrarry","respModal","markupId","$l2kTn","default","instance","$9B8F0","create","show","body","classList","add","window","addEventListener","event","code","close","remove","async","e","target","currentTarget","currentId","closest","dataset","id","setMovieId","console","log","filter","film","Number","setItem","stringify","$eWCmQ","Notify","success","fetchFilmsById","this","then"],"version":3,"file":"librarry.2fb4e833.js.map"}