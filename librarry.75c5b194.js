!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},l={},r=n.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in l){var n=l[e];delete l[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,n){l[e]=n},n.parcelRequired7c6=r),r("kwlmr"),r("bDwuD"),r("FrjcY"),r("ia8Ap"),r("2QDtI"),r("846lC"),r("3fu6U"),r("bRreI"),r("dR6B4");var a=r("bpxeT"),i=r("2TvXO"),o=r("l5bVx"),c=e(r("WMajR")).template({1:function(n,t,l,r,a){var i,c=null!=t?t:n.nullContext||{},s=n.hooks.helperMissing,d="function",u=n.escapeExpression,p=n.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"        <img\n          src='https://image.tmdb.org/t/p/w500/"+u((void 0===(i=null!=(i=p(l,"poster_path")||(null!=t?p(t,"poster_path"):t))?i:s)?"undefined":e(o)(i))===d?i.call(c,{name:"poster_path",hash:{},data:a,loc:{start:{line:6,column:47},end:{line:6,column:62}}}):i)+"'\n          alt='"+u((void 0===(i=null!=(i=p(l,"title")||(null!=t?p(t,"title"):t))?i:s)?"undefined":e(o)(i))===d?i.call(c,{name:"title",hash:{},data:a,loc:{start:{line:7,column:15},end:{line:7,column:24}}}):i)+"'\n          class='movie-card__poster lazyload'\n          loading='lazy'\n        />\n"},3:function(e,n,t,l,r){var a,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"        <img\n          src='https://yt3.ggpht.com/AAKF_677TIvjFz_9xFF0R6PgiVd0kRpEtY6APSxSDRP65nXg8hkn9NFsz2bRd9_Z37DJ9D_b=s900-c-k-c0x00ffffff-no-rj'\n          alt='"+e.escapeExpression("function"==typeof(a=null!=(a=i(t,"title")||(null!=n?i(n,"title"):n))?a:e.hooks.helperMissing)?a.call(null!=n?n:e.nullContext||{},{name:"title",hash:{},data:r,loc:{start:{line:14,column:15},end:{line:14,column:24}}}):a)+"'\n          class='movie-card__poster'\n          loading='lazy'\n        />\n"},compiler:[8,">= 4.3.0"],main:function(n,t,l,r,a){var i,c,s=null!=t?t:n.nullContext||{},d=n.hooks.helperMissing,u="function",p=n.escapeExpression,f=n.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<li class='movie-card__item' data-id='"+p((void 0===(c=null!=(c=f(l,"id")||(null!=t?f(t,"id"):t))?c:d)?"undefined":e(o)(c))===u?c.call(s,{name:"id",hash:{},data:a,loc:{start:{line:1,column:38},end:{line:1,column:44}}}):c)+"' id='open'>\n  <div class='movie-card'>\n    <div class='poster-wrapper'>\n"+(null!=(i=f(l,"if").call(s,null!=t?f(t,"poster_path"):t,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.program(3,a,0),data:a,loc:{start:{line:4,column:6},end:{line:18,column:13}}}))?i:"")+"    </div>\n    <div class='card-info'>\n      <h2 class='movie-info-title'> "+p((void 0===(c=null!=(c=f(l,"title")||(null!=t?f(t,"title"):t))?c:d)?"undefined":e(o)(c))===u?c.call(s,{name:"title",hash:{},data:a,loc:{start:{line:21,column:36},end:{line:21,column:45}}}):c)+"</h2>\n      <div class='info-wrapper'>\n        <div class='movie-icon-decor'>\n          <span>&#127871;</span>\n        </div>\n        <p class='info-item-year'>"+p((void 0===(c=null!=(c=f(l,"release_date")||(null!=t?f(t,"release_date"):t))?c:d)?"undefined":e(o)(c))===u?c.call(s,{name:"release_date",hash:{},data:a,loc:{start:{line:26,column:34},end:{line:26,column:50}}}):c)+"</p>\n        <p class='info-item-rating'><span class='rating-icon'>&#9733;</span>\n          "+p((void 0===(c=null!=(c=f(l,"vote_average")||(null!=t?f(t,"vote_average"):t))?c:d)?"undefined":e(o)(c))===u?c.call(s,{name:"vote_average",hash:{},data:a,loc:{start:{line:28,column:10},end:{line:28,column:26}}}):c)+"</p>\n      </div>\n    </div>\n  </div>\n  <div class='watched-delete-wrapper'>\n    <button class='watched-delete' type='button' id='close'></button>\n  </div>\n</li>"},useData:!0}),s=e(r("WMajR")).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,l,r){return"<div class='librarry-container'>\n  <p class='librarry-no-movies'>theare are no movies in your librarry </p>\n</div>"},useData:!0}),d=r("26m7D"),u=r("5HWQb"),p=r("dyT35"),f=r("iU1Pc"),m=document.querySelector(".gallery"),v="watch-key",h=new(0,d.ApiThemoviedb);function y(){var e=JSON.parse(localStorage.getItem(v));if(e)return e;m.innerHTML=s()}function g(){var e=y().map((function(e){return c(e)})).join("");m.innerHTML=e,e||(m.innerHTML=s())}function b(){return(b=e(a)(e(i).mark((function n(t){var l,r;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target!==t.currentTarget){e.next=2;break}return e.abrupt("return");case 2:if(l=t.target.closest(".movie-card__item").dataset.id,h.setMovieId(l),"close"!==t.target.id){e.next=8;break}r=y(),console.log(r),r=r.filter((function(e){return e.id!==Number(l)})),localStorage.setItem(v,JSON.stringify(r)),f.Notify.warning("Фильм Удалён из библиотеки"),g(),e.next=10;break;case 8:return e.next=10,h.fetchFilmsById(this.currentId).then(w);case 10:case"end":return e.stop()}}),n,this)})))).apply(this,arguments)}function w(e){var n=y(),t=(0,u.default)(e),l=p.create(t);l.show(),document.body.classList.add("stop-fon"),document.querySelector(".modal-img").addEventListener("click",_);var r=document.querySelector(".modal-btn");r.textContent="remove from watch",r.addEventListener("click",(function(e){var t=e.target.dataset.id;if(n.find((function(e){return e.id===Number(t)}))){var r=y();r=r.filter((function(e){return e.id!==Number(t)})),localStorage.setItem(v,JSON.stringify(r)),l.close(),f.Notify.success("Фильм Удалён из библиотеки"),g()}})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&(l.close(),document.body.classList.remove("stop-fon"))})),document.querySelector(".basicLightbox").addEventListener("click",(function(){document.body.classList.remove("stop-fon")}))}function _(e){var n=e.target.dataset.id;h.setMovieId(n),h.fetchTrailerMovies(n).then(x)}function x(e){if(e.results.length){var n=e.results[0].key,t='<div class=\'video-modal\'><iframe class="modal-film__video" src="https://www.youtube.com/embed/'.concat(n,'/" width="800" height="400" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>');p.create(t).show()}else f.Notify.failure("Извините ,видео не найдено")}m.addEventListener("click",(function(e){return b.apply(this,arguments)})),g(),r("26m7D"),r("8RRdE")}();
//# sourceMappingURL=librarry.75c5b194.js.map
